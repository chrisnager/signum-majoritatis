<!doctype html>
<html>
    <head>
        <title>Dot</title>
        <style>
            body {
                margin: 0;
                font: 10em/1 monospace;
            }

            #world {
                white-space: nowrap;
                background-color: #eee;
            }
        </style>
    </head>
    <body>
        <main id="world"></main>
        <script>
            var world = document.getElementById('world')
            var sequence = '+####_'

            var player = sequence[0]
            var obstacle = document.createElement('span')

            String.prototype.replaceAt=function(index, character) {
                return this.substr(0, index) + character + this.substr(index+character.length);
            }

            var KeyPressHandler = {
                down(event) {
                    if (event.keyCode === 38) {
                        Player.jump()
                    } else if (event.keyCode === 40) {
                        Player.duck()
                    }
                },

                up() {
                   Player.stand()
                }
            }

            var Player = {
                jump: function() {
                    sequence = '\'' + sequence.substr(1, sequence.length)
                    render()
                },

                stand: function() {
                    sequence = '-' + sequence.substr(1, sequence.length)
                    render()
                },

                duck: function() {
                    sequence = '.' + sequence.substr(1, sequence.length)
                    render()
                },

                explode: function() {
                    sequence = '*' + sequence.substr(1, sequence.length)
                    render()
                }
            }

            var Obstacle = '^-_'

            function setNewObstacle() {
                sequence.replaceAt(5, Obstacle[~~(Math.random() * 3)])
                render()
            }

            function updateSequence(n) {
                sequence[n - 1] = sequence[n]
                render()
            }

            function render() {
                world.textContent = sequence
                console.log(sequence)
            }






























            // setInterval(setNewObstacle, 1000)

            // setTimeout(function() {
            //     setInterval(updateSequence.bind(null, 5), 1000)
            // }, 1000)

            // setTimeout(function() {
            //     setInterval(updateSequence.bind(null, 4), 1000)
            // }, 2000)

            // setTimeout(function() {
            //     setInterval(updateSequence.bind(null, 3), 1000)
            // }, 3000)

            // setTimeout(function() {
            //     setInterval(updateSequence.bind(null, 2), 1000)
            // }, 4000)

            // if (obstacle.innerHTML === '_' && player.innerHTML === '.') {
            //     Player.explode()
            // }

            window.addEventListener('keydown', KeyPressHandler.down, true)
            window.addEventListener('keyup', KeyPressHandler.up, true)

            Player.stand()
        </script>
    </body>
</html>